<h3 id="results-header1" class="bolded-blue" style="text-align: center"></h3>
<h5 id="results-header2" class="text-center"></h5>
<br>
{{#if data.code}}
<h5 style="text-align: center">
    <span data-i18n="litw-results-code"></span>
    <span>{{ data.code }}</span>
</h5>
<br>
{{/if}}
<br>

<div id="participant_score" data-score="{{ data.score }}"></div>
<div class="accordion pb-4" id="accordionPanelsStayOpenExample">
    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                    aria-expanded="true" aria-controls="collapseOne"
                    onclick="LITW.tracking.recordClick('results:detail')"
                    data-i18n="litw-results-detail-title">
            </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body pb-4">
                <div id="results-main" class="center-content p-0">
                    <div id="graphic" class="h-100 d-flex align-items-center justify-content-center"></div>
                    <h6 class="text-center" style="margin-top: 20px;" data-i18n="study-results-explanation"></h6>
                    <p id="results-explanation" class="p-4"></p>
                </div>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                    aria-controls="panelsStayOpen-collapseThree"
                    onclick="LITW.tracking.recordClick('results:references')"
                    data-i18n="litw-results-ref-title">
            </button>
        </h2>
        <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
            <div class="accordion-body">
                <div id="results-references" class="p-4">
                    <p data-i18n="litw-results-ref-p1"></p>
                    <p data-i18n="litw-results-ref-p2"></p>
                </div>
            </div>
        </div>
    </div>
</div>

<br>

<div id="results-footer"></div>

<script type="text/javascript">
    let shownHeader;
    $(document).ready(function() {
        let usa_score = 58;
        let chn_score = 66;
        LITW.results.setup(document.getElementById('results-main').offsetWidth);
        LITW.results.drawGraphic('graphic');
        let participant_score = document.getElementById('participant_score').dataset.score;
        LITW.results.drawMark(participant_score,
            `${$.i18n('study-results-graphic-legend-YOU')} (${participant_score})`, true, 'middle', 5);
        LITW.results.drawMark(usa_score, `${$.i18n('study-results-graphic-legend-USA')} (${usa_score})`, false, 'middle', 2.5);
        LITW.results.drawMark(chn_score, `${$.i18n('study-results-graphic-legend-CHN')} (${chn_score})`, false, 'start', 1);

        if (participant_score < 50) {
            document.getElementById("results-header1").textContent =
                $.i18n('study-results-header1-low');
            document.getElementById("results-header2").textContent =
                $.i18n('study-results-header2-low');
            document.getElementById("results-explanation").textContent =
                `${$.i18n('study-results-explanation2_1-low')} ${$.i18n('study-results-explanation2_2-low')}`;
        } else {
            document.getElementById("results-header1").textContent =
                $.i18n('study-results-header1-high');
            document.getElementById("results-header2").textContent =
                $.i18n('study-results-header2-high');
            document.getElementById("results-explanation").textContent =
                `${$.i18n('study-results-explanation2_1-high')} ${$.i18n('study-results-explanation2_2-high')}`;
        }
    });

</script>
